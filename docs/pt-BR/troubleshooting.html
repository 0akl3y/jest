<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Troubleshooting · Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Troubleshooting · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/index.html"/><meta property="og:description" content="Hã, algo deu errado? Use este guia para resolver problemas com Jest."/><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/jest/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img class="logo" src="/jest/img/jest.svg"/><h2 class="headerTitle">Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/pt-BR/getting-started.html" target="_self">Documentação</a></li><li><a href="/jest/docs/pt-BR/api.html" target="_self">API</a></li><li><a href="/jest/pt-BR/help.html" target="_self">Ajuda</a></li><li><a href="/jest/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>Português (Brasil)</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/en">English</a></li><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/ro">Română</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/getting-started.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/using-matchers.html">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/asynchronous.html">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/setup-teardown.html">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/mock-functions.html">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/jest-platform.html">Plataforma Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/more-resources.html">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/snapshot-testing.html">Teste de Snapshot</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/tutorial-async.html">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/timer-mocks.html">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/manual-mocks.html">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/es6-class-mocks.html">ES6 Class Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/webpack.html">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/puppeteer.html">Using with puppeteer</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/mongodb.html">Using with MongoDB</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/migration-guide.html">Migrating to Jest</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/pt-BR/troubleshooting.html">Troubleshooting</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guias para Framework</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/tutorial-react.html">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/tutorial-react-native.html">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/testing-frameworks.html">Testing Web Frameworks</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/api.html">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/expect.html">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/mock-function-api.html">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/jest-object.html">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/configuration.html">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/pt-BR/cli.html">Jest CLI Options</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/jest/edit/master/docs/Troubleshooting.md" target="_blank">Edit</a><h1>Troubleshooting</h1></header><article><div><span><p>Hã, algo deu errado? Use este guia para resolver problemas com Jest.</p>
<h3><a class="anchor" aria-hidden="true" name="testes-est-o-falhando-e-voce-n-o-sabe-por-que"></a><a href="#testes-est-o-falhando-e-voce-n-o-sabe-por-que" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testes estão falhando e você não sabe por que</h3>
<p>Tente usar o suporte à depuração embutido no Node.</p>
<p>Place a <code>debugger;</code> statement in any of your tests, and then, in your project's directory, run:</p>
<pre><code class="hljs css bash">node --inspect-brk node_modules/.bin/jest --runInBand [any other arguments here]
or on Windows
node --inspect-brk ./node_modules/jest/bin/jest.js --runInBand [any other arguments here]
</code></pre>
<p>This will run Jest in a Node process that an external debugger can connect to. Note that the process will pause until the debugger has connected to it.</p>
<p>To debug in Google Chrome (or any Chromium-based browser), simply open your browser and go to <code>chrome://inspect</code> and click on &quot;Open Dedicated DevTools for Node&quot;, which will give you a list of available node instances you can connect to. Simply click on the address displayed in the terminal (usually something like <code>localhost:9229</code>) after running the above command, and you will be able to debug Jest using Chrome's DevTools.</p>
<p>The Chrome Developer Tools will be displayed, and a breakpoint will be set at the first line of the Jest CLI script (this is done simply to give you time to open the developer tools and to prevent Jest from executing before you have time to do so). Click the button that looks like a &quot;play&quot; button in the upper right hand side of the screen to continue execution. When Jest executes the test that contains the <code>debugger</code> statement, execution will pause and you can examine the current scope and call stack.</p>
<blockquote>
<p>Note: the <code>--runInBand</code> cli option makes sure Jest runs test in the same process rather than spawning processes for individual tests. Normally Jest parallelizes test runs across processes but it is hard to debug many processes at the same time.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" name="depurac-o-no-vs-code"></a><a href="#depurac-o-no-vs-code" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Depuração no VS Code</h3>
<p>There are multiple ways to debug Jest tests with <a href="https://code.visualstudio.com">Visual Studio Code's</a> built in <a href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging">debugger</a>.</p>
<p>Para anexar o depurador embutido, execute os testes, como foi mencionado anteriormente:</p>
<pre><code class="hljs css bash">node --inspect-brk node_modules/.bin/jest --runInBand [any other arguments here]
or on Windows
node --inspect-brk ./node_modules/jest/bin/jest.js --runInBand [any other arguments here]
</code></pre>
<p>Em seguida, anexe depurador do VS Code usando a configuração <code>launch.json</code> a seguir:</p>
<pre><code class="hljs css json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"attach"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Attach"</span>,
      <span class="hljs-attr">"port"</span>: <span class="hljs-number">9229</span>
    }
  ]
}
</code></pre>
<p>To automatically launch and attach to a process running your tests, use the following configuration:</p>
<pre><code class="hljs css json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Jest Tests"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"runtimeArgs"</span>: [
        <span class="hljs-string">"--inspect-brk"</span>,
        <span class="hljs-string">"${workspaceRoot}/node_modules/.bin/jest"</span>,
        <span class="hljs-string">"--runInBand"</span>
      ],
      <span class="hljs-attr">"console"</span>: <span class="hljs-string">"integratedTerminal"</span>,
      <span class="hljs-attr">"internalConsoleOptions"</span>: <span class="hljs-string">"neverOpen"</span>
    }
  ]
}
</code></pre>
<p>or the following for Windows:</p>
<pre><code class="hljs css json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Jest Tests"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"runtimeArgs"</span>: [
        <span class="hljs-string">"--inspect-brk"</span>,
        <span class="hljs-string">"${workspaceRoot}/node_modules/jest/bin/jest.js"</span>,
        <span class="hljs-string">"--runInBand"</span>
      ],
      <span class="hljs-attr">"console"</span>: <span class="hljs-string">"integratedTerminal"</span>,
      <span class="hljs-attr">"internalConsoleOptions"</span>: <span class="hljs-string">"neverOpen"</span>
    }
  ]
}
</code></pre>
<p>If you are using Facebook's <a href="https://github.com/facebookincubator/create-react-app"><code>create-react-app</code></a>, you can debug your Jest tests with the following configuration:</p>
<pre><code class="hljs css json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug CRA Tests"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"runtimeExecutable"</span>: <span class="hljs-string">"${workspaceRoot}/node_modules/.bin/react-scripts"</span>,
      <span class="hljs-attr">"args"</span>: [<span class="hljs-string">"test"</span>, <span class="hljs-string">"--runInBand"</span>, <span class="hljs-string">"--no-cache"</span>, <span class="hljs-string">"--env=jsdom"</span>],
      <span class="hljs-attr">"cwd"</span>: <span class="hljs-string">"${workspaceRoot}"</span>,
      <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"inspector"</span>,
      <span class="hljs-attr">"console"</span>: <span class="hljs-string">"integratedTerminal"</span>,
      <span class="hljs-attr">"internalConsoleOptions"</span>: <span class="hljs-string">"neverOpen"</span>
    }
  ]
}
</code></pre>
<p>More information on Node debugging can be found <a href="https://nodejs.org/api/debugger.html">here</a>.</p>
<h3><a class="anchor" aria-hidden="true" name="depurac-o-no-webstorm"></a><a href="#depurac-o-no-webstorm" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Depuração no WebStorm</h3>
<p>The easiest way to debug Jest tests in <a href="https://www.jetbrains.com/webstorm/">WebStorm</a> is using <code>Jest run/debug configuration</code>. It will launch tests and automatically attach debugger.</p>
<p>No menu <code>Run</code> do WebStorm selecione <code>Edit Configurations...</code>. Then click <code>+</code> and select <code>Jest</code>. Optionally specify the Jest configuration file, additional options, and environment variables. Save the configuration, put the breakpoints in the code, then click the green debug icon to start debugging.</p>
<p>If you are using Facebook's <a href="https://github.com/facebookincubator/create-react-app"><code>create-react-app</code></a>, in the Jest run/debug configuration specify the path to the <code>react-scripts</code> package in the Jest package field and add <code>--env=jsdom</code> to the Jest options field.</p>
<h3><a class="anchor" aria-hidden="true" name="problemas-de-cache"></a><a href="#problemas-de-cache" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problemas de Cache</h3>
<p>O script de transformação foi alterado ou babel foi atualizado e as mudanças não estão sendo reconhecidas por Jest?</p>
<p>Tente novamente com <a href="/jest/docs/pt-BR/cli.html#cache"><code>--no-cache</code></a>. Jest caches transformed module files to speed up test execution. If you are using your own custom transformer, consider adding a <code>getCacheKey</code> function to it: <a href="https://github.com/facebook/relay/blob/58cf36c73769690f0bbf90562707eadb062b029d/scripts/jest/preprocessor.js#L56-L61">getCacheKey in Relay</a>.</p>
<h3><a class="anchor" aria-hidden="true" name="promessas-n-o-resolvidas"></a><a href="#promessas-n-o-resolvidas" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Promessas não resolvidas</h3>
<p>Se uma promessa não é resolvida de forma alguma, esse erro pode ser lançado:</p>
<pre><code class="hljs css bash">- Error: Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL.`
</code></pre>
<p>Mais comumente, isso é causado por implementações conflitantes de Promessa. Consider replacing the global promise implementation with your own, for example <code>global.Promise = require.requireActual('promise');</code> and/or consolidate the used Promise libraries to a single one.</p>
<p>If your test is long running, you may want to consider to increase the timeout by calling <code>jest.setTimeout</code></p>
<pre><code class="hljs css js">jest.setTimeout(<span class="hljs-number">10000</span>); <span class="hljs-comment">// 10 segundos de timeout</span>
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="problemas-com-watchman"></a><a href="#problemas-com-watchman" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problemas com Watchman</h3>
<p>Try running Jest with <a href="/jest/docs/pt-BR/cli.html#watchman"><code>--no-watchman</code></a> or set the <code>watchman</code> configuration option to <code>false</code>.</p>
<p>Also see <a href="https://facebook.github.io/watchman/docs/troubleshooting.html">watchman troubleshooting</a>.</p>
<h3><a class="anchor" aria-hidden="true" name="testes-s-o-extremamente-lentos-no-docker-e-ou-servidor-de-integrac-o-continua-ci-continuous-integration"></a><a href="#testes-s-o-extremamente-lentos-no-docker-e-ou-servidor-de-integrac-o-continua-ci-continuous-integration" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testes são extremamente lentos no Docker e/ou servidor de Integração Contínua (CI, Continuous Integration).</h3>
<p>While Jest is most of the time extremely fast on modern multi-core computers with fast SSDs, it may be slow on certain setups as our users <a href="https://github.com/facebook/jest/issues/1395">have</a> <a href="https://github.com/facebook/jest/issues/1524#issuecomment-260246008">discovered</a>.</p>
<p>Based on the <a href="https://github.com/facebook/jest/issues/1524#issuecomment-262366820">findings</a>, one way to mitigate this issue and improve the speed by up to 50% is to run tests sequentially.</p>
<p>In order to do this you can run tests in the same thread using <a href="/jest/docs/pt-BR/cli.html#runinband"><code>--runInBand</code></a>:</p>
<pre><code class="hljs css bash"><span class="hljs-comment"># Using Jest CLI</span>
jest --runInBand

<span class="hljs-comment"># Using npm test (e.g. with create-react-app)</span>
npm <span class="hljs-built_in">test</span> -- --runInBand
</code></pre>
<p>Another alternative to expediting test execution time on Continuous Integration Servers such as Travis-CI is to set the max worker pool to ~<em>4</em>. Specifically on Travis-CI, this can reduce test execution time in half. Note: The Travis CI <em>free</em> plan available for open source projects only includes 2 CPU cores.</p>
<pre><code class="hljs css bash"><span class="hljs-comment"># Using Jest CLI</span>
jest --maxWorkers=4

<span class="hljs-comment"># Using npm test (e.g. with create-react-app)</span>
npm <span class="hljs-built_in">test</span> -- --maxWorkers=4
</code></pre>
<h3><a class="anchor" aria-hidden="true" name="testes-s-o-lentos-quando-depedem-de-automocking"></a><a href="#testes-s-o-lentos-quando-depedem-de-automocking" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testes são lentos quando depedem de automocking</h3>
<p>Whether via <a href="configuration.html#automock-boolean"><code>automock: true</code></a> in config or lots of <a href="jest-object.html#jestmockmodulename-factory-options"><code>jest.mock('my-module')</code></a> calls in tests, automocking has a performance cost that can add up in large projects. The more dependencies a module has, the more work Jest has to do to mock it. Something that can offset this performance cost significantly is adding a code transformer that moves <code>import</code> or <code>require</code> calls from the top of a module, where they are always executed, down into the body of the module, where they are usually not executed. This can lower the number of modules Jest has to load when running your tests by a considerable amount.</p>
<p>To transform <code>import</code> statements, there is <a href="https://github.com/zertosh/babel-plugin-transform-inline-imports-commonjs">babel-plugin-transform-inline-imports-commonjs</a>, and to transform <code>require</code> statements, there is <a href="https://github.com/facebook/fbjs/blob/master/packages/babel-preset-fbjs/plugins/inline-requires.js">Facebook's <code>inline-requires</code> babel plugin</a>, which is part of the <code>babel-preset-fbjs</code> package.</p>
<h3><a class="anchor" aria-hidden="true" name="eu-estou-usando-npm3-e-meus-node-modules-n-o-est-o-carregando-corretamente"></a><a href="#eu-estou-usando-npm3-e-meus-node-modules-n-o-est-o-carregando-corretamente" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Eu estou usando npm3 e meus node_modules não estão carregando corretamente.</h3>
<p>Atualize <code>jest-cli</code> para <code>0.9.0</code> ou acima.</p>
<h3><a class="anchor" aria-hidden="true" name="estou-usando-o-babel-e-minhas-importac-es-unmocked-n-o-est-o-funcionando"></a><a href="#estou-usando-o-babel-e-minhas-importac-es-unmocked-n-o-est-o-funcionando" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Estou usando o babel e minhas importações &quot;unmocked&quot; não estão funcionando?</h3>
<p>Atualize <code>jest-cli</code> para <code>0.9.0</code> ou acima.</p>
<p>Explicação:</p>
<pre><code class="hljs css js">jest.dontMock(<span class="hljs-string">'foo'</span>);

<span class="hljs-keyword">import</span> foo <span class="hljs-keyword">from</span> <span class="hljs-string">'./foo'</span>;
</code></pre>
<p>Em ES6, declarações de importação são içadas (hoisted, em inglês) antes de todas as outras</p>
<pre><code class="hljs css js"><span class="hljs-keyword">const</span> foo = <span class="hljs-built_in">require</span>(<span class="hljs-string">'foo'</span>);
jest.dontMock(<span class="hljs-string">'foo'</span>); <span class="hljs-comment">// Oops!</span>
</code></pre>
<p>No Jest 0.9.0, foi introduzida uma nova API <code>jest.unmock</code>. Juntamente com um plugin para babel, isto irá agora funcionar corretamente quando estiver usando <code>babel-jest</code>:</p>
<pre><code class="hljs css js">jest.unmock(<span class="hljs-string">'./foo'</span>); <span class="hljs-comment">// Use unmock!</span>

<span class="hljs-keyword">import</span> foo <span class="hljs-keyword">from</span> <span class="hljs-string">'./foo'</span>;

<span class="hljs-comment">// foo is not mocked!</span>
</code></pre>
<p>See the [Getting Started]GettingStarted.md#using-babel) guide on how to enable babel support.</p>
<h3><a class="anchor" aria-hidden="true" name="eu-fiz-upgrade-para-jest-090-e-meus-testes-agora-est-o-falhando"></a><a href="#eu-fiz-upgrade-para-jest-090-e-meus-testes-agora-est-o-falhando" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Eu fiz upgrade para Jest 0.9.0 e meus testes agora estão falhando?</h3>
<p>Jest agora está usando por padrão Jasmine 2. Deve ser fácil atualizar usando o <a href="http://jasmine.github.io/2.0/introduction.html">guia de atualização</a> do Jasmine.</p>
<p>Se você gostaria de continuar usando o Jasmine 1, defina a opção de configuração <code>testRunner</code> para <code>jasmine1</code> ou passe <code>--testRunner=jasmine1</code> como uma opção de linha de comando.</p>
<h3><a class="anchor" aria-hidden="true" name="problemas-de-compatibilidade"></a><a href="#problemas-de-compatibilidade" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problemas de compatibilidade</h3>
<p>Jest tira proveito dos novos recursos adicionados ao Node 6. Nós recomendamos que você atualize para a última versão estável do Node. A versão mínima suportada é <code>v6.0.0</code>. Versions <code>0.x.x</code> and <code>4.x.x</code> are not supported.</p>
<h3><a class="anchor" aria-hidden="true" name="coveragepathignorepatterns-parece-n-o-ter-nenhum-efeito"></a><a href="#coveragepathignorepatterns-parece-n-o-ter-nenhum-efeito" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>coveragePathIgnorePatterns</code> parece não ter nenhum efeito.</h3>
<p>Certifique-se de que você não está usando o plugin de <code>babel-plugin-Istambul</code>. Jest wraps Istanbul, and therefore also tells Istanbul what files to instrument with coverage collection. When using <code>babel-plugin-istanbul</code>, every file that is processed by Babel will have coverage collection code, hence it is not being ignored by <code>coveragePathIgnorePatterns</code>.</p>
<h3><a class="anchor" aria-hidden="true" name="ainda-sem-resoluc-o"></a><a href="#ainda-sem-resoluc-o" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ainda sem resolução?</h3>
<p>Consulte a <a href="/jest/help.html">ajuda</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="migration-guide.html">← Migrating to Jest</a><a class="docs-next button" href="tutorial-react.html">Testing React Apps →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest/" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/pt-BR/getting-started.html">Getting Started</a><a href="/jest/docs/pt-BR/snapshot-testing.html">Guides</a><a href="/jest/docs/pt-BR/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/pt-BR/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script></body></html>