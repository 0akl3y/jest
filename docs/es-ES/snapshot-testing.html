<!DOCTYPE html><html lang="es-ES"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Snapshot Testing · Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Snapshot Testing · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/index.html"/><meta property="og:description" content="Las pruebas instantáneas son una herramienta muy útil cuando quieres asegurarte de que tu UI no cambie inesperadamente."/><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/jest/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/es-ES"><img class="logo" src="/jest/img/jest.svg" alt="Jest"/><h2 class="headerTitle">Jest</h2></a><a href="/jest/es-ES/versions.html"><h3>23.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/jest/docs/es-ES/getting-started.html" target="_self">Documentación</a></li><li class="siteNavGroupActive"><a href="/jest/docs/es-ES/api.html" target="_self">API</a></li><li class=""><a href="/jest/es-ES/help.html" target="_self">Ayuda</a></li><li class=""><a href="/jest/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>Español</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/en">English</a></li><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/ro">Română</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/getting-started.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/using-matchers.html">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/asynchronous.html">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/setup-teardown.html">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/mock-functions.html">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/jest-platform.html">Jest Platform</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/jest-community.html">Jest Community</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/more-resources.html">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/es-ES/snapshot-testing.html">Snapshot Testing</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/tutorial-async.html">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/timer-mocks.html">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/manual-mocks.html">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/es6-class-mocks.html">ES6 Class Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/webpack.html">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/puppeteer.html">
Usar con puppeteer</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/mongodb.html">Utilizando con MongoDB</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/migration-guide.html">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/troubleshooting.html">Troubleshooting</a></li></ul></div><div class="navGroup navGroupActive"><h3>Framework Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/tutorial-react.html">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/tutorial-react-native.html">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/testing-frameworks.html">Testing Web Frameworks</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/api.html">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/expect.html">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/mock-function-api.html">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/jest-object.html">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/configuration.html">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/es-ES/cli.html">Jest CLI Options</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/jest/edit/master/docs/SnapshotTesting.md" target="_blank" rel="noreferrer noopener">Edit</a><h1>Snapshot Testing</h1></header><article><div><span><p>Las pruebas instantáneas son una herramienta muy útil cuando quieres asegurarte de que tu UI no cambie inesperadamente.</p>
<p>Un caso típico de prueba instantánea para una aplicación móvil representa un componente UI, toma una captura de pantalla y luego la compara con una imagen de referencia almacenada junto con la prueba. La prueba fallará si las dos imágenes no coinciden: ya sea porque el cambio es inesperado, o porque la captura de patalla necesita ser actualizada a una nueva versión del componente UI.</p>
<h2><a class="anchor" aria-hidden="true" id="comprobacion-instantanea-con-jest"></a><a href="#comprobacion-instantanea-con-jest" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Comprobación Instantánea con Jest</h2>
<p>Se puede tomar un enfoque similar cuando se trata de comprobar tus component de React. En vez de reproducir la gráfica de UI, que requeriría crear toda la aplicación, puede utilizar un reproductor de prueba para generar rápidamente un valor serializable para su árbol de React. Considere esto <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/__tests__/link.react.test.js">example test</a> for a simple <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/Link.react.js">Link component</a>:</p>
<pre><code class="hljs css javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Link <span class="hljs-keyword">from</span> <span class="hljs-string">'../Link.react'</span>;
<span class="hljs-keyword">import</span> renderer <span class="hljs-keyword">from</span> <span class="hljs-string">'react-test-renderer'</span>;

it(<span class="hljs-string">'renders correctly'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> tree = renderer
    .create(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">page</span>=<span class="hljs-string">"http://www.facebook.com"</span>&gt;</span>Facebook<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>)
    .toJSON();
  expect(tree).toMatchSnapshot();
});
</code></pre>
<p>La primera vez que esta prueba se ejecuta, Jest crea <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/__tests__/__snapshots__/link.react.test.js.snap">snapshot file</a> que luce como esto:</p>
<pre><code class="hljs css javascript">exports[<span class="hljs-string">`renders correctly 1`</span>] = <span class="hljs-string">`
&lt;a
  className="normal"
  href="http://www.facebook.com"
  onMouseEnter={[Function]}
  onMouseLeave={[Function]}
&gt;
  Facebook
&lt;/a&gt;
`</span>;
</code></pre>
<p>El artefacto de la instantánea debería ser incluido junto a los cambios del código, y revisado como parte de tu proceso de revisión de códigos. Jest utiliza <a href="https://github.com/facebook/jest/tree/master/packages/pretty-format">pretty-format</a> para hacer instantáneas que el humano pueda leer durante la revisión del código. En ejecuciones de pruebas posteriores, Jest simplemente comparará la representación de salida con la instantánea anterior. Si coinciden, la prueba pasará. Si no coinciden, ya sea porque el ejecutador de pruebas encontró una molestia en el códigoque debería ser solucionada, o porque la implementación ha cambiado y la instantánea necesita actualizarse.</p>
<p>Más información sobre cómo las pruebas instantáneas funcionan y por qué las construimos puede ser encontrada en <a href="https://facebook.github.io/jest/blog/2016/07/27/jest-14.html">release blog post</a>. Recomendamos leer <a href="http://benmccormick.org/2016/09/19/testing-with-jest-snapshots-first-impressions/">this blog post</a> para obtener un buen sentido sobre cuándo utilizar las pruebas instantáneas. También recomendamos ver esto <a href="https://egghead.io/lessons/javascript-use-jest-s-snapshot-testing-feature?pl=testing-javascript-with-jest-a36c4074">egghead video</a> en Snapshot Testing con Jest.</p>
<h3><a class="anchor" aria-hidden="true" id="actualizando-instantaneas"></a><a href="#actualizando-instantaneas" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Actualizando Instantáneas</h3>
<p>Es sencillo detectar cuándo una prueba instantánea falla luego de que un virus haya sido introducido. Cuando eso sucede, siga adelante y arregle el problema, y asegúrese de que sus pruebas instantáneas están pasándose otra vez. Ahora, hablemos del caso en el que la prueba instantánea está fallando debido a un cambio intencional en la implementación.</p>
<p>Esta situación puede presentarse si cambiamos la dirección del Link del componente al que nuestro ejemplo está apuntando, intencionalmente.</p>
<pre><code class="hljs css javascript"><span class="hljs-comment">// estuche de prueba actualizado con un Link a dirección distinta</span>
it(<span class="hljs-string">'renders correctly'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> tree = renderer
    .create(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Link</span> <span class="hljs-attr">page</span>=<span class="hljs-string">"http://www.instagram.com"</span>&gt;</span>Instagram<span class="hljs-tag">&lt;/<span class="hljs-name">Link</span>&gt;</span></span>)
    .toJSON();
  expect(tree).toMatchSnapshot();
});
</code></pre>
<p>En ese caso, Jest imprimirá esta salida:</p>
<p><img src="/jest/img/content/failedSnapshotTest.png" alt=""></p>
<p>Desde que acabamos de ajustar nuestro componente para apuntar a una dirección diferente, es razonable esperar cambios en las instantáneas para este componente. Nuestro caso de prueba instantánea está fallando porque la instantánea para nuestro componente actualizado ya no coincide con el artefacto de la instantánea para este caso de prueba.</p>
<p>Para resolver esto, necesitaremos actualizar nuestros artefactos de instantánea. Puedes ejecutar jest con una bandera que le dirá que regenere instantáneas:</p>
<pre><code class="hljs css bash">jest --updateSnapshot
</code></pre>
<p>Prosiga y acepte los cambios ejecutando el comando anterior. También puedes utilizar la bandera de carácter individual equivalente <code>-u</code> para regenerar instantáneas si prefieres. Esto volverá a generar los artefactos de instantánea para todos los tests de instantánea fallidos. Si tenemos alguna prueba instantánea adicional fallando debido a un virus no intencional, necesitaremos arreglar el virus antes de regenerar las instantáneas para evitar grabar instantáneas en el comportamiento viroso.</p>
<p>Si quisieras limitar cuál caso de pruebas instantáneas se regenera, puedes pasar una bandera adicional <code>--testNamePattern</code> para regrabar instantáneas sólo para esas pruebas que coincidan con el patrón.</p>
<p>Puedes probar esta funcionalidad clonando el <a href="https://github.com/facebook/jest/tree/master/examples/snapshot">snapshot example</a>, modificando el componente <code>Link</code>, y ejecutando Jest.</p>
<h3><a class="anchor" aria-hidden="true" id="interactive-snapshot-mode"></a><a href="#interactive-snapshot-mode" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interactive Snapshot Mode</h3>
<p>Failed snapshots can also be updated interactively in watch mode:</p>
<p><img src="/jest/img/content/interactiveSnapshot.png" alt=""></p>
<p>Once you enter Interactive Snapshot Mode, Jest will step you through the failed snapshots one test at a time and give you the opportunity to review the failed output.</p>
<p>From here you can choose to update that snapshot or skip to the next:</p>
<p><img src="/jest/img/content/interactiveSnapshotUpdate.gif" alt=""></p>
<p>Once you're finished, Jest will give you a summary before returning back to watch mode:</p>
<p><img src="/jest/img/content/interactiveSnapshotDone.png" alt=""></p>
<h3><a class="anchor" aria-hidden="true" id="property-matchers"></a><a href="#property-matchers" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Property Matchers</h3>
<p>Often there are fields in the object you want to snapshot which are generated (like IDs and Dates). If you try to snapshot these objects, they will force the snapshot to fail on every run:</p>
<pre><code class="hljs css javascript">it(<span class="hljs-string">'will fail every time'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> user = {
    <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">20</span>),
    <span class="hljs-attr">name</span>: <span class="hljs-string">'LeBron James'</span>,
  };

  expect(user).toMatchSnapshot();
});

<span class="hljs-comment">// Snapshot</span>
exports[<span class="hljs-string">`will fail every time 1`</span>] = <span class="hljs-string">`
Object {
  "createdAt": 2018-05-19T23:36:09.816Z,
  "id": 3,
  "name": "LeBron James",
}
`</span>;
</code></pre>
<p>For these cases, Jest allows providing an asymmetric matcher for any property. These matchers are checked before the snapshot is written or tested, and then saved to the snapshot file instead of the received value:</p>
<pre><code class="hljs css javascript">it(<span class="hljs-string">'will check the matchers and pass'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> user = {
    <span class="hljs-attr">createdAt</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(),
    <span class="hljs-attr">id</span>: <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">20</span>),
    <span class="hljs-attr">name</span>: <span class="hljs-string">'LeBron James'</span>,
  };

  expect(user).toMatchSnapshot({
    <span class="hljs-attr">createdAt</span>: expect.any(<span class="hljs-built_in">Date</span>),
    <span class="hljs-attr">id</span>: expect.any(<span class="hljs-built_in">Number</span>),
  });
});

<span class="hljs-comment">// Snapshot</span>
exports[<span class="hljs-string">`will check the matchers and pass 1`</span>] = <span class="hljs-string">`
Object {
  "createdAt": Any&lt;Date&gt;,
  "id": Any&lt;Number&gt;,
  "name": "LeBron James",
}
`</span>;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="best-practices"></a><a href="#best-practices" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Best Practices</h2>
<p>Snapshots are a fantastic tool for identifying unexpected interface changes within your application – whether that interface is an API response, UI, logs, or error messages. As with any testing strategy, there are some best-practices you should be aware of, and guidelines you should follow, in order to use them effectively.</p>
<h3><a class="anchor" aria-hidden="true" id="1-treat-snapshots-as-code"></a><a href="#1-treat-snapshots-as-code" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1. Treat snapshots as code</h3>
<p>Commit snapshots and review them as part of your regular code review process. This means treating snapshots as you would any other type of test or code in your project.</p>
<p>Ensure that your snapshots are readable by keeping them focused, short, and by using tools that enforce these stylistic conventions.</p>
<p>As mentioned previously, Jest uses <a href="https://yarnpkg.com/en/package/pretty-format"><code>pretty-format</code></a> to make snapshots human-readable, but you may find it useful to introduce additional tools, like <a href="https://yarnpkg.com/en/package/eslint-plugin-jest"><code>eslint-plugin-jest</code></a> with its <a href="https://github.com/jest-community/eslint-plugin-jest/blob/master/docs/rules/no-large-snapshots.md"><code>no-large-snapshots</code></a> option, or <a href="https://yarnpkg.com/en/package/snapshot-diff"><code>snapshot-diff</code></a> with its component snapshot comparison feature, to promote committing short, focused assertions.</p>
<p>The goal is to make it easy to review snapshots in pull requests, and fight against the habit of simply regenerating snapshots when test suites fail instead of examining the root causes of their failure.</p>
<h3><a class="anchor" aria-hidden="true" id="2-tests-should-be-deterministic"></a><a href="#2-tests-should-be-deterministic" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Tests should be deterministic</h3>
<p>Los tests deben ser deterministas. Running the same tests multiple times on a component that has not changed should produce the same results every time. Usted es responsable de asegurarte de que sus instantáneas generadas no incluyan plataformas específicas u otra información no determinada.</p>
<p>Por ejemplo, si tienes un componente <a href="https://github.com/facebook/jest/blob/master/examples/snapshot/Clock.react.js">Clock</a> que usa <code>Date.now()</code>, la instantánea generada por este componente será diferente cada vez que se corre el caso de prueba. En este caso podemos <a href="/jest/docs/es-ES/mock-functions.html">mock the Date.now() method</a> para devolver un valor consistente cada vez que se ejecute la prueba:</p>
<pre><code class="hljs css js"><span class="hljs-built_in">Date</span>.Now = jest.fn(() = &gt; <span class="hljs-number">1482363367071</span>);
</code></pre>
<p>Ahora, cada vez que se ejecuta el caso de prueba instantánea, <code>Date.now()</code> devolverá <code>1482363367071</code> consistentemente. Esto resultará en la misma instantánea generada para este componente independientemente de cuándo se ejecute la prueba.</p>
<h3><a class="anchor" aria-hidden="true" id="3-use-descriptive-snapshot-names"></a><a href="#3-use-descriptive-snapshot-names" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. Use descriptive snapshot names</h3>
<p>Always strive to use descriptive test and/or snapshot names for snapshots. The best names describe the expected snapshot content. This makes it easier for reviewers to verify the snapshots during review, and for anyone to know whether or not an outdated snapshot is the correct behavior before updating.</p>
<p>For example, compare:</p>
<pre><code class="hljs css js">exports[<span class="hljs-string">`&lt;UserName /&gt; should handle some test case`</span>] = <span class="hljs-string">`null`</span>;

exports[<span class="hljs-string">`&lt;UserName /&gt; should handle some other test case`</span>] = <span class="hljs-string">`
&lt;div&gt;
  Alan Turing
&lt;/div&gt;
`</span>;
</code></pre>
<p>A:</p>
<pre><code class="hljs css js">exports[<span class="hljs-string">`&lt;UserName /&gt; should render null`</span>] = <span class="hljs-string">`null`</span>;

exports[<span class="hljs-string">`&lt;UserName /&gt; should render Alan Turing`</span>] = <span class="hljs-string">`
&lt;div&gt;
  Alan Turing
&lt;/div&gt;
`</span>;
</code></pre>
<p>Since the later describes exactly what's expected in the output, it's easy to see when it's wrong:</p>
<pre><code class="hljs css js">exports[<span class="hljs-string">`&lt;UserName /&gt; should render null`</span>] = <span class="hljs-string">`
&lt;div&gt;
  Alan Turing
&lt;/div&gt;
`</span>;

exports[<span class="hljs-string">`&lt;UserName /&gt; should render Alan Turing`</span>] = <span class="hljs-string">`null`</span>;
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="preguntas-frecuentes"></a><a href="#preguntas-frecuentes" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Preguntas Frecuentes</h2>
<h3><a class="anchor" aria-hidden="true" id="are-snapshots-written-automatically-on-continuous-integration-ci-systems"></a><a href="#are-snapshots-written-automatically-on-continuous-integration-ci-systems" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Are snapshots written automatically on Continuous Integration (CI) systems?</h3>
<p>No, as of Jest 20, snapshots in Jest are not automatically written when Jest is run in a CI system without explicitly passing <code>--updateSnapshot</code>. Es esperado que todas las instantáneas sean parte del código que se ejecuta en CI y ya que las nuevas instantáneas se pasan automáticamente, no deberían pasar una ejecución de prueba en un sistema CI. Es recomendado siempre ligar todas las instantáneas y seguirlas en versión de control.</p>
<h3><a class="anchor" aria-hidden="true" id="deben-los-archivos-de-instantaneas-ser-incluidos-en-commits"></a><a href="#deben-los-archivos-de-instantaneas-ser-incluidos-en-commits" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Deben los archivos de instantáneas ser incluidos en &quot;commits&quot;?</h3>
<p>Sí, todos los archivos de instantáneas deben ser ligados junto a los módulos que están cubriendo y sus pruebas. Deben ser considerados como parte de una prueba, similar al valor de cualquier otra afirmación en Jest. De hecho, las instantáneas representan el estado de la fuente de los mpodules en cualquier momento dado. De esta forma, cuando la fuente de los mpodulos se modifica, Jest puede decir qué cambió de las versiones pasadas. También puede proveer mucho contexto adicional durante la revisión del código en el cual los revisores pueden estudiar tus cambios mejor.</p>
<h3><a class="anchor" aria-hidden="true" id="los-tests-de-instantanea-solo-funcionan-con-components-de-react"></a><a href="#los-tests-de-instantanea-solo-funcionan-con-components-de-react" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Los tests de instantánea solo funcionan con components de React?</h3>
<p><a href="/jest/docs/es-ES/tutorial-react.html">React</a> y componentes <a href="/jest/docs/es-ES/tutorial-react-native.html">React Native</a> son un buen caso de uso para pruebas instantáneas. Sin embargo, instantáneas pueden capturar cada valor serializable y deberían ser usadas cada vez que el objetivo sea probar si la salida es correcta. El repositorio de Jest contiene varios ejemplos de prueba de salida del mismo jest, la salida de la librería de afirmación de Jest así como también los mensajes de registro de varias partes del código de base de Jest. Vea una ejemplo de: <a href="https://github.com/facebook/jest/blob/master/integration-tests/__tests__/console.test.js">snapshotting CLI output</a> en el repositorio de Jest.</p>
<h3><a class="anchor" aria-hidden="true" id="cual-es-la-diferencia-entre-tests-de-instantanea-y-tests-de-regresion-visual"></a><a href="#cual-es-la-diferencia-entre-tests-de-instantanea-y-tests-de-regresion-visual" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Cuál es la diferencia entre tests de instantánea y tests de regresión visual?</h3>
<p>Las pruebas instantáneas y las pruebas de regresión visual son dos maneras distintas de probar Uls, y sirven diferentes propósitos. Las herramientas de pruebas de regresión visual toma capturas de pantallas de páginas web y compara las imágenes resultantes pixel por pixel. Con las pruebas instantáneas los valores son serializados, almacenados dentro de archivos de texto y comparados usando un algoritmo diferente. Hay distintos aspectos intermedios a considerar y hemos enumerado las razones por las que las pruebas instantáneas fueron construidas en <a href="http://facebook.github.io/jest/blog/2016/07/27/jest-14.html#why-snapshot-testing">Jest blog</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="substituyen-los-tests-de-instantanea-a-los-tests-unitarios"></a><a href="#substituyen-los-tests-de-instantanea-a-los-tests-unitarios" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Substituyen los tests de instantánea a los tests unitarios?</h3>
<p>Los tests de instantánea per-se es sólo una de las más de 20 afirmaciones que están incluidas en Jest. El objetivo de las pruebas instantáneas no es reemplazar unidades de prueba existentes, sino proveer valor adicional y hacer las pruebas más sencillas. En algunos casos, las pruebas instantáneas pueden remover potencialmente la necesidad de pruebas unitarias para un conjunto particular de funcionalidades (ej: Componentes de reacción), pero pueden trabajar en conjunto también.</p>
<h3><a class="anchor" aria-hidden="true" id="cual-es-el-rendimiento-de-tests-de-instantaneas-en-cuanto-a-velocidad-y-tamano-de-los-archivos-generados"></a><a href="#cual-es-el-rendimiento-de-tests-de-instantaneas-en-cuanto-a-velocidad-y-tamano-de-los-archivos-generados" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Cuál es el rendimiento de tests de instantáneas en cuanto a velocidad y tamaño de los archivos generados?</h3>
<p>Jest ha sido reescrito pensando en desempeño, y las pruebas instantáneas no son una excepción. Desde que las instantáneas son almacenadas dentro de los archivos de texto, esta forma de hacer pruebas es rápida y segura. Jest genera un nuevo archivo por cada archivo de prueba que invoca el <code>toMatchsnapshot</code> que coincide. El tamaño de las instantáneas es bastante pequeño. Como referencia, el tamaño de todos los archivos de instantáneas en el propio código de base de Jest es menor que 300 KB.</p>
<h3><a class="anchor" aria-hidden="true" id="como-resuelvo-conflictos-dentro-de-archivos-de-instantaneas"></a><a href="#como-resuelvo-conflictos-dentro-de-archivos-de-instantaneas" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Cómo resuelvo conflictos dentro de archivos de instantáneas?</h3>
<p>Los archivos de instantáneas deben siempre representar el estado actual de los módulos que están cubriendo. Por lo tanto, si estás fusionando dos ramas y se encuentra un conflicto en los archivos de instantáneas, puedes o resolver el conflicto manualmente o actualizar el archivo de las instantáneas ejecutando Jest e inspeccionando el resultado.</p>
<h3><a class="anchor" aria-hidden="true" id="es-posible-aplicar-los-principios-de-desarrollo-orientado-a-pruebas-con-tests-de-instantanea"></a><a href="#es-posible-aplicar-los-principios-de-desarrollo-orientado-a-pruebas-con-tests-de-instantanea" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Es posible aplicar los principios de desarrollo orientado a pruebas con tests de instantánea?</h3>
<p>A pesar de que es posible escribir archivos de instantáneas manuealmente, normalmente no es abordable. Las instantáneas ayudan a descubrir si la salida de los módulos cubiertas por pruebas han cambiado, en vez de guiarte para diseñar el código en primer lugar.</p>
<h3><a class="anchor" aria-hidden="true" id="funciona-la-cobertura-de-codigo-con-tests-de-instantanea"></a><a href="#funciona-la-cobertura-de-codigo-con-tests-de-instantanea" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>¿Funciona la cobertura de código con tests de instantánea?</h3>
<p>Sí, al igual que con cualquier otro test.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="more-resources.html">← More Resources</a><a class="docs-next button" href="tutorial-async.html">An Async Example →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest/" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/es-ES/getting-started.html">Getting Started</a><a href="/jest/docs/es-ES/snapshot-testing.html">Guides</a><a href="/jest/docs/es-ES/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/es-ES/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discord.gg/MWRhKCj">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script></body></html>