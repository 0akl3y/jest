<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Testarea aplicațiilor React Native · Jest</title><meta name="viewport" content="width=device-width"><meta property="og:title" content="Testarea aplicațiilor React Native · Jest"><meta property="og:type" content="website"><meta property="og:url" content="https://facebook.github.io/jest/index.html"><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"><meta property="og:description" content="La Facebook, noi folosim Jest pentru a testa aplicaţii [React Native](http://facebook.github.io/react-native/)."><link rel="apple-touch-icon" sizes="180x180" href="/jest/img/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/jest/img/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/jest/img/favicon/favicon-16x16.png"><link rel="manifest" href="/jest/img/favicon/manifest.json"><link rel="mask-icon" href="/jest/img/favicon/safari-pinned-tab.svg"><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"><meta name="msapplication-config" content="/jest/img/favicon/browserconfig.xml"><meta name="theme-color" content="#99424f"><link rel="alternate" type="application/atom+xml" href="/jest/blog/atom.xml" title="Jest Blog ATOM Feed"><link rel="alternate" type="application/rss+xml" href="/jest/blog/feed.xml" title="Jest Blog RSS Feed"><link rel="shortcut icon" href="/jest/img/favicon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"><link rel="stylesheet" href="/jest/css/jest.css?v=2"><link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.020/css/hack.min.css"><script type="text/javascript" src="//use.typekit.net/vqa1hcx.js"></script><script type="text/javascript">try{Typekit.load();}catch(e){}</script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img src="/jest/img/jest-outline.svg"><h2>Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/ro/getting-started.html" class="active">Documentație</a></li><li><a href="/jest/docs/ro/api.html" class="">API</a></li><li><a href="/jest/ro/help.html" class="">Ajutor</a></li><li><a href="/jest/blog/" class="">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg">Română</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/en">English</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input id="search_input_react" type="text" placeholder="Search"></li><li><a href="https://github.com/facebook/jest" class="">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Guides</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ro/getting-started.html#content">Primii pași</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/using-matchers.html#content">Utilizarea regulilor de potrivire</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/asynchronous.html#content">Testarea codului asincron</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/setup-teardown.html#content">Asamblare și dezasamblare</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/mock-functions.html#content">Funcții pentru dubluri</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/more-resources.html#content">Alte resurse</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ro/api.html#content">Globale</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/expect.html#content">Aşteptări</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/mock-function-api.html#content">Funcții pentru dubluri</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/jest-object.html#content">Obiectul Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/configuration.html#content">Configurarea Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/cli.html#content">Opțiuni Jest pentru linia de comandă</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ro/snapshot-testing.html#content">Testarea de imagine</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/tutorial-react.html#content">Testarea aplicațiilor React</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/ro/tutorial-react-native.html#content">Testarea aplicațiilor React Native</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/tutorial-async.html#content">Un exemplu asincron</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/timer-mocks.html#content">Dubluri de timp</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/manual-mocks.html#content">Manual pentru dubluri</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/webpack.html#content">Using With Webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/migration-guide.html#content">Migrarea spre Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/testing-frameworks.html#content">Testarea altor framework-uri</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/troubleshooting.html#content">Rezolvarea problemelor</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/jest/ro" target="_blank">Translate this Doc</a><h1>Testarea aplicațiilor React Native</h1></header><article><div><p>La Facebook, noi folosim Jest pentru a testa aplicaţii <a href="http://facebook.github.io/react-native/" target="_blank">React Native</a>.</p><p>Dobândiți o înţelegere mai profundă în testarea unei aplicații exemplu React Native citind următoarele serii: <a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-i-snapshots-come-into-play-68ba19b1b9fe#.12zbnbgwc" target="_blank">Partea 1: Jest – Instantaneele intră în joc</a> şi <a href="https://blog.callstack.io/unit-testing-react-native-with-the-new-jest-ii-redux-snapshots-for-your-actions-and-reducers-8559f6f8050b" target="_blank">Partea 2: Jest – Instantanee Redux pentru Acţiuni şi Reductori</a>.</p><h2><a class="anchor" name="instalare"></a>Instalare <a class="hash-link" href="#instalare">#</a></h2><p>Incepand cu versiunea react-native 0.38, instalarea Jest este inclusă implicit atunci când se rulează <code>react-native init</code>. Urmatoarea configuratie ar trebui să fie adăugată automat în fişierul package.json:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// package.json</span>
  <span class="token string">&quot;scripts&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;test&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;jest&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;jest&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;preset&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;react-native&quot;</span>
  <span class="token punctuation">}</span></pre><p><em>Notă: Dacă actualizați aplicaţia react-native şi ați utilizat anterior presetarea <code>jest-react-native</code>, elimina dependenţa din fişierul <code>package.json</code> şi schimbați presetarea cu <code>react-native</code>.</em></p><p>Pur şi simplu rulaţi <code>npm test</code> pentru a rula testele cu Jest.</p><h2><a class="anchor" name="testarea-de-imagine"></a>Testarea de imagine <a class="hash-link" href="#testarea-de-imagine">#</a></h2><p>Să creăm un <a href="/jest/docs/snapshot-testing.html" target="">test de imagine</a> pentru o componentă micuță cu câteva view-uri şi componente de text şi unele stiluri:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// Intro.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  StyleSheet<span class="token punctuation">,</span>
  Text<span class="token punctuation">,</span>
  View<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react-native&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alignItems<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
    backgroundColor<span class="token punctuation">:</span> <span class="token string">&#x27;#F5FCFF&#x27;</span><span class="token punctuation">,</span>
    flex<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    justifyContent<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  instructions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token string">&#x27;#333333&#x27;</span><span class="token punctuation">,</span>
    marginBottom<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    textAlign<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  welcome<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fontSize<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    margin<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    textAlign<span class="token punctuation">:</span> <span class="token string">&#x27;center&#x27;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Intro</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>welcome<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          Welcome to React Native<span class="token operator">!</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>instructions<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          This is a React Native snapshot test<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre><p>Acum haideţi să utilizăm procesorul de randare React şi funcționalitatea din Jest pentru testarea de imagine pentru a interacţiona cu componenta şi a captura rezultatul şi a crea un fişier de imagine:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// __tests__/Intro-test.js</span>
<span class="token keyword">import</span> <span class="token string">&#x27;react-native&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Intro <span class="token keyword">from</span> <span class="token string">&#x27;../Intro&#x27;</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// Note: test renderer must be required after react-native.</span>
<span class="token keyword">import</span> renderer <span class="token keyword">from</span> <span class="token string">&#x27;react-test-renderer&#x27;</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;renders correctly&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tree <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Intro <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Când executaţi <code>npm test</code> sau <code>jest</code>, aceasta va produce un fişier de ieşire ca acesta:</p><pre class="prism language-javascript">
<span spellcheck="true" class="token comment">// __tests__/__snapshots__/Intro-test.js.snap</span>
exports<span class="token punctuation">[</span><span class="token template-string"><span class="token string">`Intro renders correctly 1`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> `
<span class="token operator">&lt;</span>View
  style<span class="token operator">=</span><span class="token punctuation">{</span>
    Object <span class="token punctuation">{</span>
      <span class="token string">&quot;alignItems&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;backgroundColor&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#F5FCFF&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;flex&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      <span class="token string">&quot;justifyContent&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Text
    style<span class="token operator">=</span><span class="token punctuation">{</span>
      Object <span class="token punctuation">{</span>
        <span class="token string">&quot;fontSize&quot;</span><span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token string">&quot;margin&quot;</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token string">&quot;textAlign&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token operator">&gt;</span>
    Welcome to React Native<span class="token operator">!</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Text
    style<span class="token operator">=</span><span class="token punctuation">{</span>
      Object <span class="token punctuation">{</span>
        <span class="token string">&quot;color&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;#333333&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;marginBottom&quot;</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
        <span class="token string">&quot;textAlign&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token operator">&gt;</span>
    This is a React Native snapshot test<span class="token punctuation">.</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
`<span class="token punctuation">;</span></pre><p>Data viitoare când executaţi testele, rezultatul va fi comparat cu imaginea creată anterior. Imaginea ar trebui să fie commit-uită împreună cu modificarile de cod. Atunci când un test de imagine eșuează, trebuie să inspectați dacă este vorba de o modificare intenționată sau neintenţionată. În cazul în care schimbarea este intenționată se poate apela Jest cu <code>jest -u</code> pentru a suprascrie imaginea existentă.</p><p>Codul pentru acest exemplu este disponibil la <a href="https://github.com/facebook/jest/tree/master/examples/react-native" target="_blank"> exemple/react-native</a>.</p><h2><a class="anchor" name="configurarea-preset-rii"></a>Configurarea presetării <a class="hash-link" href="#configurarea-preset-rii">#</a></h2><p>Presetarea inițializează mediul şi este foarte dogmatic și se bazează pe ceea ce am găsit a fi util la Facebook. Toate opţiunile de configurare pot fi suprascrise aşa cum acestea pot fi personalizate atunci când nu se utilizează nicio presetare.</p><h3><a class="anchor" name="mediu"></a>Mediu <a class="hash-link" href="#mediu">#</a></h3><p><code>react-native</code> este livrat cu o presetare Jest, astfel încât câmpul <code>jest.preset</code> din <code>package.json</code> ar trebui să indice către <code>react-native</code>. Presetul este un mediu de node, care imită mediul unei aplicaţii React Native. Deoarece acesta nu incarca niciun API din DOM sau din browser, aceasta îmbunătăţeşte substanțial timpul de pornire Jest.</p><h3><a class="anchor" name="personaliz-ri-de-transformignorepatterns"></a>Personalizări de transformIgnorePatterns <a class="hash-link" href="#personaliz-ri-de-transformignorepatterns">#</a></h3><p>Opţiunea <a href="configuration.html#transformignorepatterns-array-string" target="_blank"> <code>transformIgnorePatterns</code></a> poate fi folosită pentru a include sau pentru a ignora fişiere care urmează a fi transformate cu babel. Din păcate multe module npm pentru react-native nu au codul sursă pre-compilat înainte de publicare.</p><p>Implicit presetul jest-react-native doar procesează fişierele sursă din proiect şi react-native. Dacă aveţi dependenţe npm care trebuie transformate puteţi personaliza această opţiune de configurare prin includerea altor module pe lângă react-native:</p><pre class="prism language-javascript">
<span class="token string">&quot;transformIgnorePatterns&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;node_modules/(?!(react-native|my-project|react-native-button)/)&quot;</span>
<span class="token punctuation">]</span></pre><h3><a class="anchor" name="setupfiles"></a>setupFiles <a class="hash-link" href="#setupfiles">#</a></h3><p>Dacă doriţi să specificați configurări suplimentare pentru fiecare fişier de test, <a href="configuration.html#setupfiles-array" target="_blank">opţiunea de configurare <code>setupFiles</code></a> poate fi folosită pentru a specifica script-uri de inițializare.</p><h3><a class="anchor" name="modulenamemapper"></a>moduleNameMapper <a class="hash-link" href="#modulenamemapper">#</a></h3><p>Opțiunea <a href="configuration.html#modulenamemapper-object-string-string" target="_blank"> <code>moduleNameMapper</code></a> poate fi utilizată pentru maparea o cale de modul către un modul diferit. În mod implicit presetarea mapează toate imaginile către un modul dublură de imagine dar dacă un modul nu poate fi găsit această opţiune de configurare poate ajuta:</p><pre class="prism language-javascript">
<span class="token string">&quot;moduleNameMapper&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;my-module.js&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;rootDir&gt;/path/to/my-module.js&quot;</span>
<span class="token punctuation">}</span></pre><h2><a class="anchor" name="recomand-ri"></a>Recomandări <a class="hash-link" href="#recomand-ri">#</a></h2><h3><a class="anchor" name="mock-ui-i-module-native-cu-jestmock"></a>Mock-uiți module native cu jest.mock <a class="hash-link" href="#mock-ui-i-module-native-cu-jestmock">#</a></h3><p>Presetarea Jest incorporată în <code>react-native</code> vine cu câteva mock-uri implicite, care sunt aplicate pe un proiect react-native. Cu toate acestea, unele componente react-native sau componente externe se bazează pe cod nativ pentru a fi randate. În astfel de cazuri, sistem manual de mocking din Jest poate ajuta pentru dublarea implementării.</p><p>De exemplu, în cazul în care codul vostru depinde de o componentă video nativă externă numită <code>react-native-video</code> aţi putea-o dubla cu un mock manual în felul următor:</p><pre class="prism language-javascript">
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;react-native-video&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">&#x27;Video&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Acest lucru va randa componenta ca <code>&lt;Video {...props} /&gt;</code> cu toate proprietățile sale regăsite în instantaneu.</p><p>Uneori, este nevoie să furnizați o dublură manuală mai complexă. De exemplu în cazul în care doriţi să redirecţionaţi proprietăți sau câmpuri statice ale unei componente native către mock, puteţi returna o componentă React diferită dintr-un mock prin acest ajutor din jest-react-native:</p><pre class="prism language-javascript">
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;path/to/MyNativeComponent&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> mockComponent <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;react-native/jest/mockComponent&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">mockComponent</span><span class="token punctuation">(</span><span class="token string">&#x27;path/to/MyNativeComponent&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Sau dacă doriţi să vă creați propriul mock manual, puteţi face ceva de genul acesta:</p><pre class="prism language-javascript">
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;Text&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> RealComponent <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">requireActual</span><span class="token punctuation">(</span><span class="token string">&#x27;Text&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;React&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">class</span> <span class="token class-name">Text</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;Text&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  Text<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> RealComponent<span class="token punctuation">.</span>propTypes<span class="token punctuation">;</span>
  <span class="token keyword">return</span> Text<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>În alte cazuri, poate doriţi să mock-uiți un modul nativ, care nu este o componentă React. Aceeași tehnică poate fi aplicată. Se recomandă inspectarea codului sursă din modulul nativ şi logarea atunci când rulează o aplicaţie react native pe un dispozitiv real şi apoi modelarea unui mock manual după modulul real.</p><p>Dacă ajungeți să mock-uiți aceleași module de multe ori este recomandată definirea acestor mock-uri într-un fişier separat şi adăugarea lor la lista de <code>setupFiles</code>.</p><h3><a class="anchor" name="includerea-react-native-inainte-de-procesorul-de-testare"></a>includerea react-native înainte de procesorul de testare <a class="hash-link" href="#includerea-react-native-inainte-de-procesorul-de-testare">#</a></h3><p>Actualmente este necesar să includeți react-native înainte de încărcarea procesorului de testare:</p><pre class="prism language-javascript">
<span class="token keyword">import</span> <span class="token string">&#x27;react-native&#x27;</span><span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// Require after react-native</span>
<span class="token keyword">import</span> renderer <span class="token keyword">from</span> <span class="token string">&#x27;react-test-renderer&#x27;</span><span class="token punctuation">;</span></pre><h3><a class="anchor" name="providesmodule"></a><code>@providesModule</code> <a class="hash-link" href="#providesmodule">#</a></h3><p>Dacă doriţi să utilizaţi sistemul de module de la Facebook <code>@providesModule</code> printr-un pachet npm, opţiunea implicită de configurare haste trebuie să fie suprascrisă şi modulele npm trebuie adăugate la <code>providesModuleNodeModules</code>:</p><pre class="prism language-javascript">
<span class="token string">&quot;haste&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;defaultPlatform&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;ios&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;platforms&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;android&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ios&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;providesModuleNodeModules&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;react-native&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;my-awesome-module&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;my-text-component&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></pre><p>Dacă doriţi să testați o altă platformă implicită sau în cazul în care construiți pentru alte platforme, opţiunile de configurare <code>defaultPlatform</code> şi <code>platforms</code> pot fi actualizate.</p></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="tutorial-react.html#content">← Anterior</a><a class="docs-next button" href="tutorial-async.html#content">Continue Reading →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"></a><div><h5>Docs</h5><a href="/jest/docs/ro/getting-started.html">Getting Started</a><a href="/jest/docs/ro/snapshot-testing.html">Guides</a><a href="/jest/docs/ro/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/ro/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><div id="fb-root"></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-44373548-17', 'auto');
            ga('send', 'pageview');

            !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)
            ){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";
            fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

            docsearch({
              apiKey: '833906d7486e4059359fa58823c4ef56',
              indexName: 'jest',
              inputSelector: '#search_input_react'
            });
          </script><script async defer src="https://buttons.github.io/buttons.js"></script></body></html>