<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Setup and Teardown · Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Setup and Teardown · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/index.html"/><meta property="og:description" content="Adesea, în timp ce scrieți teste aveți nevoie de configurări, care trebuie să se ruleze înainte de teste, şi diverse curățări, care trebuie să se ruleze după execuția testelor. Jest oferă funcţii utilitare pentru aceste situații."/><meta property="og:image" content="/jest/img/opengraph.png"/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="/jest/css/main.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script async="" defer="" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img class="logo" src="/jest/img/jest.svg"/><h2 class="headerTitle">Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/ro/getting-started.html" target="_self">Documentație</a></li><li><a href="/jest/docs/ro/api.html" target="_self">API</a></li><li><a href="/jest/ro/help.html" target="_self">Ajutor</a></li><li><a href="/jest/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>Română</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/en">English</a></li><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/ru">Русский</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Introduction</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ro/getting-started.html">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/using-matchers.html">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/asynchronous.html">Testing Asynchronous Code</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/ro/setup-teardown.html">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/mock-functions.html">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/more-resources.html">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ro/api.html">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/expect.html">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/mock-function-api.html">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/jest-object.html">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/configuration.html">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/cli.html">Jest CLI Options</a></li></ul></div><div class="navGroup navGroupActive"><h3>Framework Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ro/tutorial-react.html">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/tutorial-react-native.html">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/testing-frameworks.html">Testing Web Frameworks</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ro/snapshot-testing.html">Testarea de imagine</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/tutorial-async.html">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/timer-mocks.html">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/manual-mocks.html">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/webpack.html">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/migration-guide.html">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ro/troubleshooting.html">Troubleshooting</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Setup and Teardown</h1></header><article><div><span><p>Adesea, în timp ce scrieți teste aveți nevoie de configurări, care trebuie să se ruleze înainte de teste, şi diverse curățări, care trebuie să se ruleze după execuția testelor. Jest oferă funcţii utilitare pentru aceste situații.</p>
<h3><a class="anchor" name="repetarea-configur-rii-mai-multor-teste"></a>Repetarea configurării mai multor teste <a class="hash-link" href="#repetarea-configur-rii-mai-multor-teste">#</a></h3>
<p>Dacă aveţi ceva rulați ceva cod în mod repetat pentru mai multe teste, puteţi utiliza <code>beforeEach</code> şi <code>afterEach</code>.</p>
<p>De exemplu, să prespunem că mai multe teste interacţionează cu o bază de date a oraşelor. Avem o metodă <code>initializeCityDatabase()</code> care trebuie să fie apelată înainte de fiecare dintre aceste teste, si o metodă <code>clearCityDatabase()</code> care trebuie să fie apelată după fiecare dintre aceste teste. Aceasta se poate realiza cu:</p>
<pre><code class="language-js">beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  initializeCityDatabase();
});

afterEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  clearCityDatabase();
});

test(<span class="hljs-string">'city database has Vienna'</span>, () =&gt; {
  expect(isCity(<span class="hljs-string">'Vienna'</span>)).toBeTruthy();
});

test(<span class="hljs-string">'city database has San Juan'</span>, () =&gt; {
  expect(isCity(<span class="hljs-string">'San Juan'</span>)).toBeTruthy();
});
</code></pre>
<p><code>beforeEach</code> and <code>afterEach</code> can handle asynchronous code in the same ways that <a href="/jest/docs/ro/asynchronous.html">tests can handle asynchronous code</a> - they can either take a <code>done</code> parameter or return a promise. De exemplu, în cazul în care <code>initializeCityDatabase()</code> returnează o promisiune care este rezolvată atunci când baza de date s-a inițializat, ar trebui să returnăm acea promisiune:</p>
<pre><code class="language-js">beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> initializeCityDatabase();
});
</code></pre>
<h3><a class="anchor" name="configurare-unic"></a>Configurare unică <a class="hash-link" href="#configurare-unic">#</a></h3>
<p>În unele cazuri, trebuie să configurăm o singură dată, la începutul unui fişier. Acest lucru poate fi supărător mai ales atunci când configurarea este asincronă, deci nu se poate face în linie. Jest oferă <code>beforeAll</code> şi <code>afterAll</code> pentru aceste situaţii.</p>
<p>De exemplu, dacă <code>initializeCityDatabase</code> şi <code>clearCityDatabase</code> returnează promisiuni, şi baza de date cu oraşe ar putea fi refolosită între teste, am putea schimba codul nostru de testare în felul următor:</p>
<pre><code class="language-js">beforeAll(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> initializeCityDatabase();
});

afterAll(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> clearCityDatabase();
});

test(<span class="hljs-string">'city database has Vienna'</span>, () =&gt; {
  expect(isCity(<span class="hljs-string">'Vienna'</span>)).toBeTruthy();
});

test(<span class="hljs-string">'city database has San Juan'</span>, () =&gt; {
  expect(isCity(<span class="hljs-string">'San Juan'</span>)).toBeTruthy();
});
</code></pre>
<h3><a class="anchor" name="delimitare"></a>Delimitare <a class="hash-link" href="#delimitare">#</a></h3>
<p>În mod implicit, blocurile <code>before</code> şi <code>after</code> se aplică la fiecare test din fişier. Însă puteţi grupa testele împreună folosind un bloc <code>describe</code>. Atunci când acestea sunt în interiorul unui bloc <code>describe</code>, blocurile <code>before</code> şi <code>after</code> se aplică numai la testele din interiorul acelui bloc <code>describe</code>.</p>
<p>De exemplu, să presupunem că nu avem doar o bază de datecu orașe, ci avem și o bază de date de alimente. Am putea face configurări diferite pentru diferite teste:</p>
<pre><code class="language-js"><span class="hljs-comment">// Applies to all tests in this file</span>
beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> initializeCityDatabase();
});

test(<span class="hljs-string">'city database has Vienna'</span>, () =&gt; {
  expect(isCity(<span class="hljs-string">'Vienna'</span>)).toBeTruthy();
});

test(<span class="hljs-string">'city database has San Juan'</span>, () =&gt; {
  expect(isCity(<span class="hljs-string">'San Juan'</span>)).toBeTruthy();
});

describe(<span class="hljs-string">'matching cities to foods'</span>, () =&gt; {
  <span class="hljs-comment">// Applies only to tests in this describe block</span>
  beforeEach(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> initializeFoodDatabase();
  });

  test(<span class="hljs-string">'Vienna &lt;3 sausage'</span>, () =&gt; {
    expect(isValidCityFoodPair(<span class="hljs-string">'Vienna'</span>, <span class="hljs-string">'Wiener Schnitzel'</span>)).toBe(<span class="hljs-literal">true</span>);
  });

  test(<span class="hljs-string">'San Juan &lt;3 plantains'</span>, () =&gt; {
    expect(isValidCityFoodPair(<span class="hljs-string">'San Juan'</span>, <span class="hljs-string">'Mofongo'</span>)).toBe(<span class="hljs-literal">true</span>);
  });
});
</code></pre>
<h3><a class="anchor" name="sfaturi-generale"></a>Sfaturi generale <a class="hash-link" href="#sfaturi-generale">#</a></h3>
<p>În cazul în care un test eșuează, unul dintre primele lucruri pe care ar trebui să le verificaţi este dacă dacă testul cade si atunci când rulează doar el. În Jest este simplu să rulați un singur test - doar schimbați temporar comanda <code>test</code> în <code>test.only</code>:</p>
<pre><code class="language-js">test.only(<span class="hljs-string">'this will be the only test that runs'</span>, () =&gt; {
  expect(<span class="hljs-literal">true</span>).toBe(<span class="hljs-literal">false</span>);
});

test(<span class="hljs-string">'this test will not run'</span>, () =&gt; {
  expect(<span class="hljs-string">'A'</span>).toBe(<span class="hljs-string">'A'</span>);
});
</code></pre>
<p>Dacă aveţi un test care cade adesea atunci când face parte dintr-o suită mai mare de teste, dar nu cade atunci când rulează singur, cu siguranță ceva de la un test precedent interferează cu acesta. Puteţi rezolva adesea acest lucru curățarea stării comune cu <code>beforeEach</code>. Dacă nu sunteţi sigur că starea comună este modificată, puteţi doar să o afișați într-un bloc <code>beforeEach</code>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="asynchronous.html">← Testing Asynchronous Code</a><a class="docs-next button" href="mock-functions.html">Mock Functions →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest/" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/ro/getting-started.html">Getting Started</a><a href="/jest/docs/ro/snapshot-testing.html">Guides</a><a href="/jest/docs/ro/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/ro/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script><script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script></body></html>