<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Jest 13.0: Flow &amp; REPL ¬∑ Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Jest 13.0: Flow &amp; REPL ¬∑ Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/blog/2016/06/22/jest-13.html"/><meta property="og:description" content="Today we are happy to announce the next major release of Jest. We have made"/><meta property="og:image" content="https://facebook.github.io/jest/img/opengraph.png"/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://facebook.github.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://facebook.github.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/jest/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img class="logo" src="/jest/img/jest.svg"/><h2 class="headerTitle">Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/en/getting-started.html" target="_self">Docs</a></li><li><a href="/jest/docs/en/api.html" target="_self">API</a></li><li><a href="/jest/en/help.html" target="_self">Help</a></li><li><a href="/jest/blog" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/ja">Êó•Êú¨Ë™û</a></li><li><a href="/jest/es-ES">Espa√±ol</a></li><li><a href="/jest/pt-BR">Portugu√™s (Brasil)</a></li><li><a href="/jest/ro">Rom√¢nƒÉ</a></li><li><a href="/jest/ru">–†—É—Å—Å–∫–∏–π</a></li><li><a href="/jest/uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</a></li><li><a href="/jest/zh-Hans">ÁÆÄ‰Ωì‰∏≠Êñá</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>‚Ä∫</i><span>Recent Posts</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Recent Posts</h3><ul><li class="navListItem"><a class="navItem" href="/jest/blog/2017/12/18/jest-22.html">Jest 22: Refinements &amp; Custom Runners</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner.html">Jest 20: üíñ Delightful Testing &amp; üèÉüèΩ Multi-Project-Runner</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2017/02/21/jest-19-immersive-watch-mode-test-platform-improvements.html">üÉè Jest 19: Immersive Watch Mode &amp; Test Platform Improvements</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2017/01/30/a-great-developer-experience.html">A Great Developer Experience</a></li><li class="navListItem"><a class="navItem" href="/jest/blog/2016/12/15/2016-in-jest.html">2016 in Jest</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer documentContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1><a href="/jest/blog/2016/06/22/jest-13.html">Jest 13.0: Flow &amp; REPL</a></h1><p class="post-meta">June 22, 2016</p><div class="authorBlock"><p class="post-authorName"><a href="http://twitter.com/cpojer" target="_blank">Christoph Pojer</a></p><div class="authorPhoto"><a href="http://twitter.com/cpojer" target="_blank"><img src="https://graph.facebook.com/100000023028168/picture/?height=200&amp;width=200"/></a></div></div></header><div><span><p>Today we are happy to announce the next major release of Jest. We have made
major changes to Jest which are going to benefit you and all of Facebook's
JavaScript test infrastructure. Most importantly, we added static types to all
of Jest's code during a recent Jest hackathon at Facebook. Fifteen people worked
for a day and night to add <a href="https://flowtype.org/">Flow</a> types to Jest and to
add new features to Jest. The Flow types serve two purposes: First, we believe
that code is written to be read. Most of the time, code is written only once but
read by dozens of people over the course of years. Adding static types to the
project helps document the code and helps explain some of the architecture in
Jest. Second, adding static types makes maintenance easier and will allow us to
more confidently refactor parts of Jest without fear of breakages.</p>
<p>The Flow project has evolved a lot within Facebook and has been successfully
adopted across many of our frameworks and almost all of our product code.
Adoption can be parallelized incredibly well ‚Äì it can be done file-by-file until
enough of the codebase is well-typed. Then, Flow provides real value and helps
guide through large changes. Through this, many small edge cases and bugs were
found.</p>
<!--truncate-->
<p>With the help of <a href="https://github.com/lerna/lerna">lerna</a>, we continued to
modularize the Jest project. With just a small
<a href="https://github.com/lerna/lerna#lernajson">update to the configuration</a>, Flow
and lerna now get along well with each other. Splitting up Jest into packages
helped us rethink module boundaries and enabled us to ship useful
<a href="https://github.com/facebook/jest/tree/master/packages">packages</a> standalone:
The <code>jest-runtime</code> and <code>jest-repl</code> cli tools now allow you to run scripts in a
sandboxed Jest environment, enabling you to run and debug your app from the
command line. This is especially helpful for projects that use Facebook's
<code>@providesModule</code> module convention. To get started, just install <code>jest-repl</code>
and run it in the same folder you normally run your tests in! We also published
a <code>jest-changed-files</code> package that finds changed files in version control for
either git or hg, a common thing in developer tools.</p>
<h2><a class="anchor" aria-hidden="true" name="new-and-improved-features"></a><a href="#new-and-improved-features" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New and improved features</h2>
<ul>
<li>Added a notification plugin that shows a test run notification when using
<code>--notify</code>.</li>
<li>Added a <code>browser</code> config option to properly resolve npm packages with a
browser field in <code>package.json</code> if you are writing tests for client side apps.</li>
<li>Improved ‚Äúno tests found message‚Äù which will now report which tests were found
and how they were filtered.</li>
<li>Added <code>jest.isMockFunction(jest.fn())</code> to test for mock functions.</li>
<li>Improved test reporter printing and added a test failure summary when running
many tests.</li>
<li>Added support for mocking virtual modules through
<code>jest.mock('Module', implementation, {virtual: true})</code>.</li>
<li>Removed the <code>.haste_cache</code> folder. Jest now uses the operating system's
preferred temporary file location.</li>
<li>Added the duration of individual tests in verbose mode.</li>
<li>Added the ability to record snapshots in Jest. We'll be publishing a separate
blog post about this feature soon.</li>
</ul>
<p>Finally, we have received a complete website redesign done by Matthew Johnston
and added documentation for using
<a href="http://facebook.github.io/jest/docs/tutorial-webpack.html#content">Jest with Webpack</a>.
Happy Jesting!</p>
</span></div></div></div><div class="blog-recent"><a class="button" href="/jest/blog">Recent Posts</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest/" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/en/getting-started.html">Getting Started</a><a href="/jest/docs/en/snapshot-testing.html">Guides</a><a href="/jest/docs/en/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright ¬© 2018 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script></body></html>